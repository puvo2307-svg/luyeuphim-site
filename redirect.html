<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đang chuyển hướng...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #121212;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .container {
            max-width: 400px;
        }
        .loading {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .spinner {
            border: 3px solid #333;
            border-top: 3px solid #ee4d2d;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .message {
            font-size: 14px;
            color: #888;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="loading">Đang mở Shopee và YouTube...</div>
        <div class="spinner"></div>
        <div class="message">Vui lòng đợi trong giây lát...</div>
    </div>

    <script>
        (function() {
            // Link Shopee
            var shopeeLink = "https://s.shopee.vn/9pXNbUiEFE";
            
            // Link YouTube channel (web)
            var youtubeWebLink = "https://youtube.com/channel/UCb35SXg3vJeYP5povmGHA1A?sub_confirmation=1";
            
            // Deep link YouTube app
            var youtubeAppLink = "vnd.youtube://channel/UCb35SXg3vJeYP5povmGHA1A";
            var youtubeIOSLink = "youtube://channel/UCb35SXg3vJeYP5povmGHA1A";
            
            // Phát hiện thiết bị
            var ua = navigator.userAgent || navigator.vendor || window.opera;
            var isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
            var isAndroid = /Android/.test(ua);
            var isMobile = isIOS || isAndroid;
            
            // Hàm mở YouTube (ưu tiên app trên mobile)
            function openYouTube() {
                if (isMobile) {
                    // Thử mở app trước
                    var appLink = isIOS ? youtubeIOSLink : youtubeAppLink;
                    var pageHidden = false;
                    
                    // Lắng nghe sự kiện khi trang bị ẩn (app đã mở)
                    document.addEventListener('visibilitychange', function() {
                        if (document.hidden) {
                            pageHidden = true;
                        }
                    });
                    
                    // Thử mở app
                    try {
                        // Trên iOS, dùng location.href
                        if (isIOS) {
                            window.location.href = appLink;
                        } else {
                            // Trên Android, thử cả location và window.open
                            window.location.href = appLink;
                        }
                    } catch(e) {
                        // Nếu lỗi, sẽ fallback về web
                    }
                    
                    // Nếu sau 800ms trang vẫn visible (app không mở được), mở web
                    setTimeout(function() {
                        if (!pageHidden && document.visibilityState === 'visible') {
                            try {
                                window.open(youtubeWebLink, '_blank');
                            } catch(e) {
                                window.location.href = youtubeWebLink;
                            }
                        }
                    }, 800);
                } else {
                    // PC: mở web bình thường
                    try {
                        window.open(youtubeWebLink, '_blank');
                    } catch(e) {
                        window.location.href = youtubeWebLink;
                    }
                }
            }
            
            // Mở Shopee ngay lập tức
            try {
                var shopeeWindow = window.open(shopeeLink, '_blank');
                if (!shopeeWindow) {
                    window.location.href = shopeeLink;
                }
            } catch(e) {
                window.location.href = shopeeLink;
            }
            
            // Sau 300ms mở YouTube (giống logic trong index.html)
            setTimeout(function() {
                openYouTube();
            }, 300);
            
            // Đóng tab này sau 2 giây (nếu được phép)
            setTimeout(function() {
                try {
                    window.close();
                } catch(e) {
                    // Không thể đóng tab
                }
            }, 2000);
        })();
    </script>
</body>
</html>

