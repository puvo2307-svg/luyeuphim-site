<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đang chuyển hướng...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #121212;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .container {
            max-width: 400px;
        }
        .loading {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .spinner {
            border: 3px solid #333;
            border-top: 3px solid #ee4d2d;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .message {
            font-size: 14px;
            color: #888;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="loading">Đang mở Shopee và YouTube...</div>
        <div class="spinner"></div>
        <div class="message">Vui lòng đợi trong giây lát...</div>
    </div>

    <script>
        (function() {
            // Link Shopee (web)
            var shopeeWebLink = "https://s.shopee.vn/9pXNbUiEFE";
            
            // Deep link Shopee app
            var shopeeAppLink = "shopee://"; // Universal link cho Shopee
            var shopeeIOSLink = "shopee://"; // iOS
            var shopeeAndroidLink = "com.shopee.vn://"; // Android
            
            // Link YouTube channel (web)
            var youtubeWebLink = "https://youtube.com/channel/UCb35SXg3vJeYP5povmGHA1A?sub_confirmation=1";
            
            // Deep link YouTube app
            var youtubeAppLink = "vnd.youtube://channel/UCb35SXg3vJeYP5povmGHA1A";
            var youtubeIOSLink = "youtube://channel/UCb35SXg3vJeYP5povmGHA1A";
            
            // Phát hiện thiết bị
            var ua = navigator.userAgent || navigator.vendor || window.opera;
            var isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
            var isAndroid = /Android/.test(ua);
            var isMobile = isIOS || isAndroid;
            
            // Hàm mở Shopee (ưu tiên app trên mobile)
            function openShopee(callback) {
                if (isMobile) {
                    // Trên mobile: mở link web Shopee (sẽ tự động mở app nếu có)
                    var shopeeOpened = false;
                    
                    // Lắng nghe sự kiện khi trang bị ẩn (app đã mở)
                    var visibilityHandler = function() {
                        if (document.hidden) {
                            shopeeOpened = true;
                        }
                    };
                    document.addEventListener('visibilitychange', visibilityHandler);
                    
                    // Mở link web Shopee (sẽ tự mở app nếu có)
                    try {
                        var shopeeWindow = window.open(shopeeWebLink, '_blank');
                        if (!shopeeWindow) {
                            window.location.href = shopeeWebLink;
                        }
                    } catch(e) {
                        window.location.href = shopeeWebLink;
                    }
                    
                    // Đợi đủ lâu để Shopee mở (app hoặc web)
                    setTimeout(function() {
                        document.removeEventListener('visibilitychange', visibilityHandler);
                        // Sau khi Shopee đã mở, đợi thêm 800ms rồi mới mở YouTube
                        if (callback) {
                            setTimeout(callback, 800);
                        }
                    }, 1200);
                } else {
                    // PC: mở web Shopee
                    try {
                        window.open(shopeeWebLink, '_blank');
                    } catch(e) {
                        window.location.href = shopeeWebLink;
                    }
                    // PC: đợi 300ms rồi mở YouTube
                    if (callback) {
                        setTimeout(callback, 300);
                    }
                }
            }
            
            // Hàm mở YouTube (ưu tiên app trên mobile)
            function openYouTube() {
                if (isMobile) {
                    // Thử mở app trước
                    var appLink = isIOS ? youtubeIOSLink : youtubeAppLink;
                    var pageHidden = false;
                    
                    // Lắng nghe sự kiện khi trang bị ẩn (app đã mở)
                    document.addEventListener('visibilitychange', function() {
                        if (document.hidden) {
                            pageHidden = true;
                        }
                    });
                    
                    // Thử mở app
                    try {
                        if (isIOS) {
                            window.location.href = appLink;
                        } else {
                            window.location.href = appLink;
                        }
                    } catch(e) {
                        // Nếu lỗi, sẽ fallback về web
                    }
                    
                    // Nếu sau 800ms trang vẫn visible (app không mở được), mở web
                    setTimeout(function() {
                        if (!pageHidden && document.visibilityState === 'visible') {
                            try {
                                window.open(youtubeWebLink, '_blank');
                            } catch(e) {
                                window.location.href = youtubeWebLink;
                            }
                        }
                    }, 800);
                } else {
                    // PC: mở web bình thường
                    try {
                        window.open(youtubeWebLink, '_blank');
                    } catch(e) {
                        window.location.href = youtubeWebLink;
                    }
                }
            }
            
            // Mở Shopee trước, sau đó mới mở YouTube
            openShopee(function() {
                // Callback: sau khi Shopee đã mở (hoặc đã thử mở), mới mở YouTube
                openYouTube();
            });
            
            // Đóng tab này sau 3 giây (nếu được phép)
            setTimeout(function() {
                try {
                    window.close();
                } catch(e) {
                    // Không thể đóng tab
                }
            }, 3000);
        })();
    </script>
</body>
</html>

